<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Zach Lab Notebook</title>
<link rel="stylesheet" href="https://stackedit.io/res-min/themes/base.css" />
<script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML"></script>
</head>
<body><div class="container"><h2 id="lab-notebook-zachary-glassman-lett-spinor-lab">Lab Notebook (Zachary Glassman- Lett Spinor Lab)</h2>

<p><div class="toc">
<ul>
<li><ul>
<li><a href="#lab-notebook-zachary-glassman-lett-spinor-lab">Lab Notebook (Zachary Glassman- Lett Spinor Lab)</a></li>
</ul>
</li>
<li><a href="#1102016">1/10/2016</a></li>
<li><a href="#1112016">1/11/2016</a><ul>
<li><ul>
<li><ul>
<li><a href="#105004-11012016">10:50:04-11/01/2016</a></li>
<li><a href="#131359-11012016">13:13:59-11/01/2016</a></li>
<li><a href="#163545-11012016">16:35:45-11/01/2016</a></li>
<li><a href="#182125-11012016">18:21:25-11/01/2016</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#1122016">1/12/2016</a><ul>
<li><ul>
<li><ul>
<li><a href="#102247-12012016">10:22:47-12/01/2016</a></li>
<li><a href="#182337-12012016">18:23:37-12/01/2016</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#1132016">1/13/2016</a><ul>
<li><ul>
<li><ul>
<li><a href="#100816-13012016">10:08:16-13/01/2016</a></li>
<li><a href="#121616-13012016">12:16:16-13/01/2016</a></li>
<li><a href="#125647-13012016">12:56:47-13/01/2016</a></li>
<li><a href="#141734-13012016">14:17:34-13/01/2016</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#1142016">1/14/2016</a><ul>
<li><ul>
<li><ul>
<li><a href="#101330-14012016">10:13:30-14/01/2016</a></li>
<li><a href="#140847-14012016">14:08:47-14/01/2016</a></li>
<li><a href="#193942-14012016">19:39:42-14/01/2016</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#1192016">1/19/2016</a><ul>
<li><ul>
<li><ul>
<li><a href="#104828-19012016">10:48:28-19/01/2016</a></li>
<li><a href="#165458-19012016">16:54:58-19/01/2016</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#1202016">1/20/2016</a><ul>
<li><ul>
<li><ul>
<li><a href="#110759-20012016">11:07:59-20/01/2016</a></li>
<li><a href="#142213-20012016">14:22:13-20/01/2016</a></li>
<li><a href="#150705-20012016">15:07:05-20/01/2016</a></li>
<li><a href="#165842-20012016">16:58:42-20/01/2016</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#1212016">1/21/2016</a><ul>
<li><ul>
<li><ul>
<li><a href="#123008-21012016">12:30:08-21/01/2016</a></li>
<li><a href="#161731-21012016">16:17:31-21/01/2016</a></li>
<li><a href="#192135-21012016">19:21:35-21/01/2016</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><a href="#1222016">1/22/2016</a><ul>
<li><ul>
<li><ul>
<li><a href="#102300-22012016">10:23:00-22/01/2016</a></li>
<li><a href="#123904-22012016">12:39:04-22/01/2016</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</p>



<h1 id="1102016">1/10/2016</h1>

<p>This is the first entry in the markdown lab notebook, we are going to see if we like it.  First thing to do is check the temperatures and the pressures.  Of course this can also be seen on <a href="http://lettspinorlab.github.io/">LettSpinorLab</a> live.  Everything looks good in terms of the circulator outside.</p>

<table>
<thead>
<tr>
  <th>Time</th>
  <th>Pressure</th>
  <th>Ion Current</th>
  <th>T2</th>
  <th>T3</th>
  <th>T4</th>
  <th>T5</th>
  <th>T6</th>
  <th>T7</th>
  <th>T8</th>
  <th>T9</th>
  <th>T10</th>
  <th>T11</th>
</tr>
</thead>
<tbody><tr>
  <td>11:08a</td>
  <td>1.8E-8</td>
  <td>2.0E-5</td>
  <td>92.0</td>
  <td>111.3</td>
  <td>92.5</td>
  <td>111.7</td>
  <td>108.3</td>
  <td>69.0</td>
  <td>91.3</td>
  <td>60.2</td>
  <td>59.7</td>
  <td>102.9</td>
</tr>
</tbody></table>


<p>I did not change any of the variacs.  For the rest of the day, I will figure out how to get this lab notebook operational and also work on my simulations.  When I make more measurements, I will add them to the above table.</p>



<h1 id="1112016">1/11/2016</h1>

<p>Today I again checked the temperature and pressure, the temperatures were the same as before, but the Pressure was 1.7E-8 and the ion pump current was 2.6E-5 at 9:31am.  </p>



<h4 id="105004-11012016">10:50:04-11/01/2016</h4>

<p>Now we will be aligning the sfg system. </p>



<h4 id="131359-11012016">13:13:59-11/01/2016</h4>

<p>We have plugged all the laser power cords into the blue plugs.  Now I will align the TA.  Some notes for setting up the NPPhotonics fiber laser </p>

<ul>
<li>Must select FLM-0107</li>
<li>Must select Rev B</li>
</ul>

<p>After turning on the laser,, we didn’t see any power, so changed fibers to one with green tips on it, PM90-XP.  We were previously using blue tipped fiber.  Output at first is 49.31mW. </p>



<h4 id="163545-11012016">16:35:45-11/01/2016</h4>

<p>Aligning the SFG system.  First thing to do is align the Tapered Amplifier.  The light comes out of the fiber laser, goes through an isolator and two lenses before being steered in to the amplifier.  </p>



<h4 id="182125-11012016">18:21:25-11/01/2016</h4>

<p>Brian gave me some tips on starting up the TA, I am going to copy them into this document.</p>

<ol>
<li>Check your TA chip is OK by diode testing it. It should have a normal diode voltage drop in one direction and infinite resistance in the other direction</li>
<li>Mount the chip. The mount has x, y and z degrees of freedom. To change x, loosen the bolts through to the base and slide the mount. To change y, add aluminum foil underneath the mount. To change z, rotate the threaded lens mount.</li>
<li>Connect the current controller and temp controller. Set the temp controller at about 20C. Put the current controller at 0A.</li>
<li>For a 2W chip, do not go above 400mA without properly seeding the laser. Also avoid seeding the TA for long times without running current through the TA. Check the manufacturer spec for the max seed. Eagleyard should be 50mW max. We use 30-35mW usually. <br>
<ul><li>Adjust the spontaneous emission. It should be going straight backwards from the mount and level to the table.</li>
<li>Collimate the beam by using the lens mount z adjustment. It will probably have a wide horizontal halo. Ignore that and make the center bright part collimated.</li>
<li>Bring in your seed beam to the TA. It should be mode matched (collimated and the same size as the back reflection).</li></ul></li>
<li>You should be seeding the laser at this point. Optimize the output power at 400mA      current. You should aim for &gt;10mW output. Yes, you are getting out less than you put in.</li>
<li>Before doing any experiment (or anything with a potential for back reflection), put in an optical isolator. You will need it!</li>
<li>Carefully increase the current and plot the output power versus current. The curve will level off somewhere. Stop increasing current when it starts to level off. This is your max current.</li>
<li>The output spatial mode will look terrible. Good luck shaping it. If you’re putting it into a fiber, be careful not to burn the fiber. The TA spatial mode is a function of current, so you will need to constantly realign as you turn the TA current up.</li>
<li>It is highly recommended that a piece of the TA input seed and output power is simultaneously put into a fabry perot to determine if there the TA is causing feedback to the seed. An optical isolator on the input seed may be necessary.</li>
</ol>

<p>Also, very useful paper by Dan Steck <a href="http://steck.us/papers/ta.pdf">Steck TA paper</a></p>



<h1 id="1122016">1/12/2016</h1>

<p>I am trying to figure out how well my simulations compare to each other .  I have three types of simulations:</p>

<ul>
<li>coherent state evolution</li>
<li>fock state evolution</li>
<li>mean field</li>
</ul>

<p>Right now the mean field and fock state simulations comprae well, I think the issue is that the coherent evolution uses parameters which need to be scaled by factors of <script type="math/tex" id="MathJax-Element-1">\pi</script>.  I belive the correct scaling is <script type="math/tex" id="MathJax-Element-2">4 \pi c</script>, where <script type="math/tex" id="MathJax-Element-3">c</script> is the dynamical evolution rate.</p>

<p>The public access to the program will be through a script which does all of the conversions, so users should not have to worry about this.  Right now I am working with simulations of about 5000 atoms as it is inconvenient to run coherent simulations for larger atom numbers.  I will run a large simulation while I try to align the TA and check back after lunch.</p>



<h4 id="102247-12012016">10:22:47-12/01/2016</h4>

<p>Now I am working on aligning the TA using instructions from yesterday.</p>

<ol>
<li>Wired up the temperature PID circuit and set it to 18.2 C.</li>
<li>TA current turned on, no spontaneous emission.  Checked connections and tried again, still no emission.  Need to turn off lights probably.  Turned off lights, weak emission, but there.</li>
<li>Moved mirrors back and aligned two pinholes to align beam from fiber laser into TA.</li>
</ol>



<h4 id="182337-12012016">18:23:37-12/01/2016</h4>

<p>TA is aligned and with minimal effor have 4mW of output power.  Going to mess with the telescope lense setup to try to optimze this.  Had to take the second lens off of a stage to get it to the right height.  Arne had the last two mirrors lower the light, I moved everything down to the same level.  We have 4.5 mw of power, lets turn up the power and see what we have.  We have put on the attenutator, so our initial reading is different</p>

<table>
<thead>
<tr>
  <th>Current (mA)</th>
  <th>Output Power  (mW)</th>
</tr>
</thead>
<tbody><tr>
  <td>425.2</td>
  <td>3.75</td>
</tr>
<tr>
  <td>500.6</td>
  <td>7.62</td>
</tr>
<tr>
  <td>550.3</td>
  <td>11.8</td>
</tr>
<tr>
  <td>600.0</td>
  <td>17.7</td>
</tr>
<tr>
  <td>650.0</td>
  <td>25.9</td>
</tr>
<tr>
  <td>700.1</td>
  <td>36.2</td>
</tr>
<tr>
  <td>750.6</td>
  <td>48.7</td>
</tr>
<tr>
  <td>800.4</td>
  <td>64.6</td>
</tr>
<tr>
  <td>850.3</td>
  <td>81.2</td>
</tr>
<tr>
  <td>900.6</td>
  <td>100</td>
</tr>
<tr>
  <td>950.4</td>
  <td>124</td>
</tr>
<tr>
  <td>1000.3</td>
  <td>146</td>
</tr>
</tbody></table>


<p>Tomorrow, we will optimize the beampath more, this is a bit lower than Arne measured on 06/28/2013, but not too bad.</p>



<h1 id="1132016">1/13/2016</h1>

<p>Played around with commenting the simulation code this morning, using a linter which enforces style guidelines, should make it easier for other people to use.</p>



<h4 id="100816-13012016">10:08:16-13/01/2016</h4>

<p>Everything looks good with regards to temperature, pressure, and logging software.  Going to optimize the TA.  I moved the mirrors to be closer to the TA and re-aligned completely to save some space on the table.  I swapped out the mount for the second lens for a micrometer so I can do some finer adjustments.</p>



<h4 id="121616-13012016">12:16:16-13/01/2016</h4>

<p>TA is now partially aligned, after lunch I will get the power up.  Acquired GPIB to usb cable to hook up SRS630 thermocouple monitor to the computer for the bake. </p>



<h4 id="125647-13012016">12:56:47-13/01/2016</h4>

<p>Got it back to where it was yesterday.  Will continue trying to optimize, then I will make a measurement of the power as a function of TA current.  </p>

<p>I have optimized as much as I could.  Power measured beyond TA with the FieldMate is 3.02mW with  ~29mW of input seed.  I now put in the optical isolator with 74% efficiency.    This isn’t great, I think I will tweak it up later.</p>

<p>Now we will make the power measurement:</p>

<table>
<thead>
<tr>
  <th>Current (mA)</th>
  <th>Output Power  (mW)</th>
</tr>
</thead>
<tbody><tr>
  <td>400.4</td>
  <td>2.18</td>
</tr>
<tr>
  <td>449.9</td>
  <td>3.7</td>
</tr>
<tr>
  <td>500.5</td>
  <td>5.98</td>
</tr>
<tr>
  <td>552.1</td>
  <td>9.38</td>
</tr>
<tr>
  <td>602.1</td>
  <td>14.1</td>
</tr>
<tr>
  <td>651.5</td>
  <td>20.7</td>
</tr>
<tr>
  <td>700.7</td>
  <td>29.1</td>
</tr>
<tr>
  <td>751.3</td>
  <td>39.5</td>
</tr>
<tr>
  <td>802.3</td>
  <td>53.2</td>
</tr>
<tr>
  <td>855.8</td>
  <td>68.4</td>
</tr>
<tr>
  <td>902.6</td>
  <td>83.1</td>
</tr>
<tr>
  <td>950.2</td>
  <td>102</td>
</tr>
<tr>
  <td>1000.8</td>
  <td>121</td>
</tr>
<tr>
  <td>1051.1</td>
  <td>140</td>
</tr>
<tr>
  <td>1102.9</td>
  <td>165</td>
</tr>
<tr>
  <td>1150.9</td>
  <td>186</td>
</tr>
<tr>
  <td>1200.8</td>
  <td>206</td>
</tr>
<tr>
  <td>1255.7</td>
  <td>238</td>
</tr>
<tr>
  <td>1302.3</td>
  <td>261</td>
</tr>
<tr>
  <td>1352.1</td>
  <td>281</td>
</tr>
<tr>
  <td>1400.3</td>
  <td>311</td>
</tr>
<tr>
  <td>1451.1</td>
  <td>340</td>
</tr>
</tbody></table>


<p>This is not enough power, so we will optimize more at low power.  Power optimized.  When we set up the optics for the innolight laser we will need to partially re-align anyway.  </p>



<h4 id="141734-13012016">14:17:34-13/01/2016</h4>

<p>Now I will get the SRS630 thermocouple reader working.  It will interface with the same python program to push data to website.  </p>

<p>The reader is working and the data is now being stored on an influxdb/grafana workflow which is accessbile at <a href="jqi-logger.physics.umd.edu">JQI-Logger</a> which is a JQI wide timeseries monitoring database setup.  I will not keep passwords here, but there is a Python API for InfluxDB which allows easy data mongering.  </p>

<p>I screwed up when loading the old data into the database and converted timezones wrong, so the old data is recorded as six hours earlier than it actually is.  </p>



<h1 id="1142016">1/14/2016</h1>

<p>Today I will get the rest of the SFG system going as well as wipe and clean the old analysis computer to be used as a monitoring computer to free up serial ports on the laptop.</p>

<p>Cleaned up the SpinorBEC panel on Grafana so it now displays relevent statistics.</p>



<h4 id="101330-14012016">10:13:30-14/01/2016</h4>

<p>Need to properly optimize the two isolators in the TA part of the SFG system.  Aligning an isolator requires the following steps from the <a href="http://www.ofr.com/io_alignment.htm">OFR Website</a></p>

<ol>
<li>Remove protective tape from polatizor cells.</li>
<li>Place the isoltaor in the laser beam.  Place a detector &gt; 8” from the ouput polarizer.  Center the beam.</li>
<li>Loosen set screws on the polarizer cells.</li>
<li>Rotate the input polariztor until transmission is maximzed, thus aligning it to the laser’s plane of polarization.  Lock down its set screw.</li>
<li>Rotate the output polarizer until the transmission is maximized.  This should occur at 45 relative to the input plane of polarization.</li>
<li>Reverse the isolator and put the detector a few inches from the input polarizer.  Center the beam.</li>
<li>Adjust the output polarizer until the transmission is minimized (should only be 1-2 degrees).</li>
<li>Return the isolator to operating position.  Should now be ready to use.</li>
</ol>

<p>The model of isolators and expected transmission we are using are: <br>
* <a href="https://www.thorlabs.com/newgrouppage9.cfm?objectgroup_id=4915">ThorLabs IO-2.5-1064-VLP</a>, expected transmission is 75% <br>
* EOT Isolator, expected transmission &gt; 90%</p>



<h4 id="140847-14012016">14:08:47-14/01/2016</h4>

<p>Had group meeting and lunch.  Removed the EOT isolator and am going to try to optimize TA again.   </p>

<p>Wrote documentation for the Simulation code I wrote as <a href="https://github.com/ZachGlassman/SpinorBECSimulation">Simulation Code</a>.</p>



<h4 id="193942-14012016">19:39:42-14/01/2016</h4>

<p>Aligned the TA again from scratch fixing the height.  </p>

<p>It turns out the system works better if the lenses are closer together than would be expected, however, at 401mW, I now have 6.3mW.  I am going to take data to see the trend.</p>

<table>
<thead>
<tr>
  <th>Current (mA)</th>
  <th>Output Power  (mW)</th>
</tr>
</thead>
<tbody><tr>
  <td>401.6</td>
  <td>6.36</td>
</tr>
<tr>
  <td>455.5</td>
  <td>10.6</td>
</tr>
<tr>
  <td>503.5</td>
  <td>16.1</td>
</tr>
<tr>
  <td>552.9</td>
  <td>23.7</td>
</tr>
<tr>
  <td>602.4</td>
  <td>33.5</td>
</tr>
<tr>
  <td>655.0</td>
  <td>46.6</td>
</tr>
<tr>
  <td>701.7</td>
  <td>60.1</td>
</tr>
<tr>
  <td>750.2</td>
  <td>76</td>
</tr>
<tr>
  <td>802.3</td>
  <td>96.1</td>
</tr>
<tr>
  <td>857.3</td>
  <td>116</td>
</tr>
<tr>
  <td>900.0</td>
  <td>138</td>
</tr>
<tr>
  <td>952.1</td>
  <td>164</td>
</tr>
<tr>
  <td>1001.1</td>
  <td>189</td>
</tr>
<tr>
  <td>1055.4</td>
  <td>218</td>
</tr>
<tr>
  <td>1102.9</td>
  <td>246</td>
</tr>
<tr>
  <td>1150.9</td>
  <td>275</td>
</tr>
<tr>
  <td>1201.3</td>
  <td>305</td>
</tr>
<tr>
  <td>1250.6</td>
  <td>338</td>
</tr>
<tr>
  <td>1302.5</td>
  <td>373</td>
</tr>
<tr>
  <td>1355.9</td>
  <td>407</td>
</tr>
<tr>
  <td>1400.1</td>
  <td>439</td>
</tr>
<tr>
  <td>1451.1</td>
  <td>476</td>
</tr>
<tr>
  <td>1500</td>
  <td>510</td>
</tr>
<tr>
  <td>1558.5</td>
  <td>555</td>
</tr>
<tr>
  <td>1602.0</td>
  <td>588</td>
</tr>
<tr>
  <td>1657</td>
  <td>629</td>
</tr>
<tr>
  <td>1705.7</td>
  <td>670</td>
</tr>
<tr>
  <td>1752.3</td>
  <td>706</td>
</tr>
<tr>
  <td>1802.4</td>
  <td>741</td>
</tr>
<tr>
  <td>1853.0</td>
  <td>787</td>
</tr>
<tr>
  <td>1902.8</td>
  <td>831</td>
</tr>
<tr>
  <td>1959.1</td>
  <td>867</td>
</tr>
<tr>
  <td>2000.4</td>
  <td>908</td>
</tr>
</tbody></table>


<p><img src="https://lh3.googleusercontent.com/-VF1jqr-A3j0/VphJFwwjMjI/AAAAAAAAG9Q/J00Vz-RJiTg/s0/power1-14-2016.png" alt="enter image description here" title="Power of TA"></p>

<p>I am going to tweak it up and bit, then call it for the night.</p>



<h1 id="1192016">1/19/2016</h1>

<p>Working on simulations to compare with Ryan.  For now I am <em>faking</em> negative q by using an imaginary magnetic field since <script type="math/tex" id="MathJax-Element-4">q</script> is just the term which is quadratic in the magnetic field.  This works as long as there is no linear shift.  Eventually it will be better to just work in terms of <script type="math/tex" id="MathJax-Element-5">q</script> anyway or at least be able to.</p>



<h4 id="104828-19012016">10:48:28-19/01/2016</h4>

<p>Alinging the TA.  At 400mA, I get about 7mW out of the TA.  I am going to try to make this better.  Not able to do much better in a short time. </p>

<p>Preparing for meeting with Ryan Wilson about the spinor evolution.</p>



<h4 id="165458-19012016">16:54:58-19/01/2016</h4>

<p>Had a long chat with Ryan Wilson, found that calculation for q was incorrect by factor of <script type="math/tex" id="MathJax-Element-6">(2\pi)^3</script> which is probably a momentum space integral.  Our calculations agree except for that.  I need to prepare plots of :</p>

<ul>
<li>Initial state distribution for truncated wigner</li>
<li>Long time evolution of coherent state.</li>
<li>Full simulation for <script type="math/tex" id="MathJax-Element-7">q=-5</script> </li>
</ul>

<p>Prepared these plots, they are shown below.  The first is the intial disttribution for TWA at 10k atoms and the second is a simulation of 10k atoms for -5q.  I think there might be a slight issue with the initial state preparation since the simulations should agree slightly better.</p>

<p><img src="https://lh3.googleusercontent.com/-1X1jOqrgN2k/Vp-jDatkl4I/AAAAAAAAG98/-g6SdNNnAXo/s0/InitialDistribution-1.png" alt="Initial TWA" title="InitialDistribution.png"></p>

<p><img src="https://lh3.googleusercontent.com/-PA-Fq5JkNIk/Vp-jLcu8vwI/AAAAAAAAG-I/sNCQOGhPy_s/s0/m5q10k_plot-1.png" alt="Evolution -5q" title="m5q10k_plot.png"></p>



<h1 id="1202016">1/20/2016</h1>

<p>Today I will try to do several things: <br>
* Make progress on cluster computations <br>
* Get TA aligned with new waveplate (should help power) <br>
* Set up temperature monitoring of the lab through Rasberry pi or arduino.</p>



<h4 id="110759-20012016">11:07:59-20/01/2016</h4>

<p>Set up the temperature monitor for the room with an arduino and an <a href="https://www.adafruit.com/products/1782">Adafruit MPC9808</a>.  </p>

<p>I now have cluster access to Deepthought2 and am going to spend the rest of the morning trying to get that working.</p>



<h4 id="142213-20012016">14:22:13-20/01/2016</h4>

<p>I put in the waveplate for the TA which helped the power a bit.  However, the power was wandering around by about .2mW over a timescale of minutes so I adjusted the telescope to see if I could improve that.  The output power at 400mA current is about 8mW now.</p>

<p>I took off the attenuator to get a better measurement and the TA is aligned to 10.8mW.  We are ready to proceed.  </p>



<h4 id="150705-20012016">15:07:05-20/01/2016</h4>

<p>New power measuremennt </p>

<table>
<thead>
<tr>
  <th>Current (mA)</th>
  <th>Output Power  (mW)</th>
</tr>
</thead>
<tbody><tr>
  <td>400.7</td>
  <td>7.69</td>
</tr>
<tr>
  <td>501.7</td>
  <td>18.9</td>
</tr>
<tr>
  <td>603.3</td>
  <td>39.6</td>
</tr>
<tr>
  <td>713.9</td>
  <td>74.4</td>
</tr>
<tr>
  <td>801.8</td>
  <td>111</td>
</tr>
<tr>
  <td>904.7</td>
  <td>160</td>
</tr>
<tr>
  <td>1001.9</td>
  <td>216</td>
</tr>
<tr>
  <td>1106.9</td>
  <td>281</td>
</tr>
<tr>
  <td>1200.5</td>
  <td>342</td>
</tr>
<tr>
  <td>1300.9</td>
  <td>416</td>
</tr>
<tr>
  <td>1400.8</td>
  <td>488</td>
</tr>
<tr>
  <td>1506.4</td>
  <td>573</td>
</tr>
<tr>
  <td>1601.4</td>
  <td>647</td>
</tr>
<tr>
  <td>1703.1</td>
  <td>737</td>
</tr>
<tr>
  <td>1813.2</td>
  <td>823</td>
</tr>
<tr>
  <td>1903.9</td>
  <td>917</td>
</tr>
<tr>
  <td>2000.8</td>
  <td>995</td>
</tr>
</tbody></table>


<p><img src="https://lh3.googleusercontent.com/-hP2JkiGGJFM/Vp_o8gaFKgI/AAAAAAAAG-o/qzoGg7F_MLI/s0/power1-20-2016.png" alt="enter image description here" title="power1-20-2016.png"> <br>
This should be good enough.</p>



<h4 id="165842-20012016">16:58:42-20/01/2016</h4>

<p>I have done everything I set out to do today.  I also ran a long time simulation is show below. <br>
<img src="https://lh3.googleusercontent.com/-kJ0DHfKi52M/VqADNH-r4nI/AAAAAAAAG-8/S6_kPOqHBhE/s0/figure_1.png" alt="enter image description here" title="longtime1-20.png"></p>

<p>What is perhaps interesting is that both the single fock state and the TWA are great approximations for some period of time, but they each fail at long times.  It seems like only an incomplete description is needed for the first few oscillations.  This is quite good as it means we may not need a full cluster simulation even if the TWA does not work.</p>



<h1 id="1212016">1/21/2016</h1>

<p>Today I need to sort out my schedule for next semester and get the lab ready for the big snow storm.</p>

<p>Group meeting this morning with presentation by Carla about Quantum Imaging.</p>



<h4 id="123008-21012016">12:30:08-21/01/2016</h4>

<p>Hooked up thermocouple to the ion pump below the magnets which should give us an idea of the maximum temperature of the magnets.  It is something like 40 celsius.  So this should not be an issue at all.  As always ones can view the status at <a href="http://jqi-logger.physics.umd.edu/dashboard/db/spinorbec">JQI Logger</a>.  </p>



<h4 id="161731-21012016">16:17:31-21/01/2016</h4>

<p>Optimized the isolator at full 2A, was already close to what it should be.  Then re-aligned the TA at 2A.  The TA alignment is <em>strongly</em> dependant on the input current, thus final alignments must be done at full power.  I found I had to increase the distance between the telescope lens pair prior to the TA at 2A compared to 400mA.  </p>

<p>The procedure to align the isolator was to rotate the magnetic body until the part of the input beam reflected off the beam splitter on the input side from the incoming beam was minimized.  We will keep the TA alignment as is (~820 mW @ 2A with isolator) for now.</p>

<p>Next we will put in a prism pair and a spacial filter for beam shaping and cleaning.  The prism pair changes the beam height and it is not parallel to the table anymore.  The angle is between 1 and 2 degrees from the horizontal.</p>



<h4 id="192135-21012016">19:21:35-21/01/2016</h4>

<p>I have fixed this and put in the spatial filter, tomorrow I will align the spatial fiter.</p>

<p>I have updated the Fock State simulation by adding an adaptive stepsize ‘zvode’ method as opposed to a very simple fourth order Runge-Kutta method.  This should alleviate the need to choose a correct step size.  The advantage seems to be that there is no need to choose the step size and there is a benefit when using large atom numbers (&gt;25k), however at smaller atom numbers it seems to do many more steps than the really quite basic fourth order method I already implemented without any noticible increase in error.  At very small atom numbers, it also does better.  </p>

<p>The conclusion is that for any particular time step one chooses with the basic method there is a maximum atom number for which the propogation does not go unstable and a region where it is also faster than an adaptive time step method.  The adaptive time step is always stable, but can take longer times for some atom numbers.  I will have to do more testing, but it could be that using the adaptive algorithm is not as good as optimzing the step for a specific number.  This is unlike the TWA code in which the adaptive step size gave significant performance benefits.</p>



<h1 id="1222016">1/22/2016</h1>

<p>It is snowing, so I am working today on my simulations an attempting to get them to run on the cluster.  Unfortunately, my simulations rely on numba, which is a JIT compiler targeting llvm relying on a more updated version of python than is on the cluster.  I have spoken to the cluster admin to see if they can upgrade python, but for today, I will work on removing the dependancy. </p>



<h4 id="102300-22012016">10:23:00-22/01/2016</h4>

<p>Most of the time in the code is spend calculating the tridiagonal Hamtilonian for each <script type="math/tex" id="MathJax-Element-8">k</script> in the number of pairs basis at each time step.  This is done through a function called tri_ham which is written in a optimized for the JIT compiler, although also works without it.  I have profiled the function with and without the compiler to get </p>

<table>
<thead>
<tr>
  <th>Function</th>
  <th>Time for 40k atoms</th>
</tr>
</thead>
<tbody><tr>
  <td>With JIT</td>
  <td>811 <script type="math/tex" id="MathJax-Element-9">\mu</script>s</td>
</tr>
<tr>
  <td>Without JIT</td>
  <td>283 ms</td>
</tr>
</tbody></table>


<p>This the JIT gives a speedup of ~350 times.  Thus not using the compiler will render the code essentially useless.  For reference, here is the function we are considering</p>



<pre class="prettyprint prettyprinted"><code class="language-python"><span class="pln">
</span><span class="kwd">def</span><span class="pln"> tri_ham</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span><span class="pln">bfield</span><span class="pun">,</span><span class="pln">psi</span><span class="pun">,</span><span class="pln">n_atoms</span><span class="pun">):</span><span class="pln">
    </span><span class="str">'''compute the tridiagonal hamiltonian for fock state'''</span><span class="pln">
    ans </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">empty</span><span class="pun">(</span><span class="pln">len</span><span class="pun">(</span><span class="pln">psi</span><span class="pun">),</span><span class="pln"> dtype </span><span class="pun">=</span><span class="pln"> complex</span><span class="pun">)</span><span class="pln">
    </span><span class="com">#first for diagonal interation</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">len</span><span class="pun">(</span><span class="pln">psi</span><span class="pun">)):</span><span class="pln">
        ans</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i</span><span class="pun">*(</span><span class="lit">2</span><span class="pun">*(</span><span class="pln">n_atoms</span><span class="pun">-</span><span class="lit">2</span><span class="pun">*</span><span class="pln">i</span><span class="pun">))-</span><span class="lit">1</span><span class="pun">)*</span><span class="pln"> c</span><span class="pun">/</span><span class="pln">n_atoms</span><span class="pun">*</span><span class="pln">psi</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> bfield </span><span class="pun">*</span><span class="pln"> i</span><span class="pun">*</span><span class="pln">psi</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln">
    </span><span class="com">#now for interaction with kp = i-1</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="lit">1</span><span class="pun">,</span><span class="pln">len</span><span class="pun">(</span><span class="pln">psi</span><span class="pun">)):</span><span class="pln">
        ans</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> i </span><span class="pun">*</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">sqrt</span><span class="pun">((</span><span class="pln">n_atoms </span><span class="pun">-</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)*(</span><span class="pln">n_atoms </span><span class="pun">-</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*(</span><span class="pln">i</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)))*</span><span class="pln">psi</span><span class="pun">[</span><span class="pln">i</span><span class="pun">-</span><span class="lit">1</span><span class="pun">]*</span><span class="pln"> c</span><span class="pun">/</span><span class="pln">n_atoms
    </span><span class="com">#now for kp = i +1</span><span class="pln">
    </span><span class="kwd">for</span><span class="pln"> i </span><span class="kwd">in</span><span class="pln"> range</span><span class="pun">(</span><span class="pln">len</span><span class="pun">(</span><span class="pln">psi</span><span class="pun">)-</span><span class="lit">1</span><span class="pun">):</span><span class="pln">
        ans</span><span class="pun">[</span><span class="pln">i</span><span class="pun">]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)*</span><span class="pln">np</span><span class="pun">.</span><span class="pln">sqrt</span><span class="pun">((</span><span class="pln">n_atoms</span><span class="pun">-</span><span class="lit">2</span><span class="pun">*(</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)+</span><span class="lit">1</span><span class="pun">)*(</span><span class="pln">n_atoms</span><span class="pun">-</span><span class="lit">2</span><span class="pun">*(</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)+</span><span class="lit">2</span><span class="pun">))*</span><span class="pln">psi</span><span class="pun">[</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">]*</span><span class="pln"> c</span><span class="pun">/</span><span class="pln">n_atoms
    </span><span class="kwd">return</span><span class="pln"> ans</span></code></pre>

<p>The goal for right now is to see if I can implement this same functionality using numpy such that I don’t lost speed and can then run easily on the supercomputer.  The dependencies are currently</p>

<ul>
<li>numpy</li>
<li>matplotlib</li>
<li>numba</li>
<li>sys</li>
<li>time</li>
<li>tqdm</li>
<li>scipy</li>
</ul>

<p>However, all but numpy and scipy could be removed easily if I can get this function to be faster.</p>

<p>One preliminary solution has been obtained, which runs in 1.45ms, thus only a factor of 2-3 times slower than the JIT compiled code and only has numpy dependency.  </p>



<h4 id="123904-22012016">12:39:04-22/01/2016</h4>

<p>We also need to change the functions which compute expection values in a similiar manner.  For reference, here is the fast numpy only code for computing the tridiagonal Hamiltonian matrix elements.</p>

<pre class="prettyprint prettyprinted"><code class="language-python"><span class="pln">
</span><span class="kwd">def</span><span class="pln"> tri_ham_np</span><span class="pun">(</span><span class="pln">c</span><span class="pun">,</span><span class="pln">bfield</span><span class="pun">,</span><span class="pln">psi</span><span class="pun">,</span><span class="pln">n_atoms</span><span class="pun">):</span><span class="pln">
    </span><span class="str">'''compute the tridiagonal hamiltonian for fock state
    so we can only use numpy, create arrays of the indices'''</span><span class="pln">
    ans </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">empty</span><span class="pun">(</span><span class="pln">len</span><span class="pun">(</span><span class="pln">psi</span><span class="pun">),</span><span class="pln"> dtype </span><span class="pun">=</span><span class="pln"> complex</span><span class="pun">)</span><span class="pln">
    i </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">mgrid</span><span class="pun">[</span><span class="lit">0</span><span class="pun">:</span><span class="pln">len</span><span class="pun">(</span><span class="pln">psi</span><span class="pun">)]</span><span class="pln">
    ans </span><span class="pun">=</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i</span><span class="pun">*(</span><span class="lit">2</span><span class="pun">*(</span><span class="pln">n_atoms</span><span class="pun">-</span><span class="lit">2</span><span class="pun">*</span><span class="pln">i</span><span class="pun">))-</span><span class="lit">1</span><span class="pun">)*</span><span class="pln"> c</span><span class="pun">/</span><span class="pln">n_atoms</span><span class="pun">*</span><span class="pln">psi </span><span class="pun">+</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> bfield </span><span class="pun">*</span><span class="pln"> i</span><span class="pun">*</span><span class="pln">psi
    i </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">mgrid</span><span class="pun">[</span><span class="lit">1</span><span class="pun">:</span><span class="pln">len</span><span class="pun">(</span><span class="pln">psi</span><span class="pun">)]</span><span class="pln">
    ans</span><span class="pun">[</span><span class="lit">1</span><span class="pun">:]</span><span class="pln"> </span><span class="pun">+=</span><span class="pln"> i </span><span class="pun">*</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">sqrt</span><span class="pun">((</span><span class="pln">n_atoms </span><span class="pun">-</span><span class="pln"> </span><span class="lit">2</span><span class="pln"> </span><span class="pun">*</span><span class="pln"> </span><span class="pun">(</span><span class="pln">i</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)</span><span class="pln"> </span><span class="pun">-</span><span class="pln"> </span><span class="lit">1</span><span class="pun">)*(</span><span class="pln">n_atoms </span><span class="pun">-</span><span class="pln"> </span><span class="lit">2</span><span class="pun">*(</span><span class="pln">i</span><span class="pun">-</span><span class="lit">1</span><span class="pun">)))*</span><span class="pln">psi</span><span class="pun">[:-</span><span class="lit">1</span><span class="pun">]*</span><span class="pln"> c</span><span class="pun">/</span><span class="pln">n_atoms
    i </span><span class="pun">=</span><span class="pln"> np</span><span class="pun">.</span><span class="pln">mgrid</span><span class="pun">[:(</span><span class="pln">len</span><span class="pun">(</span><span class="pln">psi</span><span class="pun">)-</span><span class="lit">1</span><span class="pun">)]</span><span class="pln">
    ans</span><span class="pun">[:-</span><span class="lit">1</span><span class="pun">]+=(</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)*</span><span class="pln">np</span><span class="pun">.</span><span class="pln">sqrt</span><span class="pun">((</span><span class="pln">n_atoms</span><span class="pun">-</span><span class="lit">2</span><span class="pun">*(</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)+</span><span class="lit">1</span><span class="pun">)*(</span><span class="pln">n_atoms</span><span class="pun">-</span><span class="lit">2</span><span class="pun">*(</span><span class="pln">i</span><span class="pun">+</span><span class="lit">1</span><span class="pun">)+</span><span class="lit">2</span><span class="pun">))*</span><span class="pln">psi</span><span class="pun">[</span><span class="lit">1</span><span class="pun">:]*</span><span class="pln"> c</span><span class="pun">/</span><span class="pln">n_atoms
    </span><span class="kwd">return</span><span class="pln"> ans</span></code></pre>

<p>All code seems to produce equivalent answers and is certainly equivalent mathematically, however, it appears that there is some difference due to machine precision.  After some testing, it appears this difference is acceptable.  </p>

<p><img src="https://lh3.googleusercontent.com/-syCR5quDaKk/VqJ0WIuM-tI/AAAAAAAAG_8/_vlS4Q0KkU0/s0/npvsnumbacompare.png" alt="enter image description here" title="npvsnumbacompare.png"></p>

<p>The top graph is both evolutions over time for 4000 atoms and the bottom is a histogram of the error.  Since the error is in the 1e-11 range as compared to populations of thousands, this is perfectly acceptable.</p>

<h4 id="132413-22012016">13:24:13-22/01/2016</h4>

<p>This code is now ready to run on the cluster.  The only further optimization that could be done is to use a faster numerical integration algorithm.  I will spend a bit investigating the scipy ode library to see if I can improve this.</p></div></body>
</html>